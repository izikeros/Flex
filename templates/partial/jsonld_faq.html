{# FAQPage Schema for articles with FAQ content #}
{# Reads FAQ from:
   1. Article frontmatter (priority)
   2. Content markers extracted by seo_leo_enhancer plugin (fallback)
   
   Frontmatter format:
   FAQ:
     - question: What is X?
       answer: X is...
     - question: How do I Y?
       answer: You can Y by...
   
   Content marker format:
   <!-- faq-start -->
   ### What is X?
   X is...
   <!-- faq-end -->
#}

{% set faq_items = article.metadata.get('faq') %}
{% if not faq_items and article.seo_leo %}
{% set faq_items = article.seo_leo.faq_from_content %}
{% endif %}
{% if faq_items %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for item in faq_items %}
    {
      "@type": "Question",
      "name": "{{ item.question | escape }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ item.answer | escape }}"
      }
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endif %}
